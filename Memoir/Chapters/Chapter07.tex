%************************************************
\chapter{Evaluación, Comparación y Discusión de Resultados}
\label{ch:eval}
%************************************************

\section{Conjuntos de Datos}
\label{sec:datasets}

El conjunto de datos usado ha sido \emph{Spanish Universal
  Dependency} \cite{udv14}, para poder ejecutar el algoritmo con estos datos, ha
sido necesario hacer una conversión de los mismos, ya que el \emph{\ac{POS}
  tagger} de Stanford no etiqueta los datos de acuerdo al
estandar\footnote{\url{http://universaldependencies.org/docs/u/pos/index.html}}. El
\emph{tagger} de Stanford utiliza las etiquetas de \emph{AnCora
  3.0}\footnote{\url{http://clic.ub.edu/corpus/en}}. Para dicha conversión se
usó un \emph{script} en \textsc{python} proporcionado por \citeauthor{rohit2016}
\cite{rohit2016}.

En concreto, el conjunto de datos usado se llama \textsc{UD\_Spanish-AnCora},
puede descargarse a través de
\url{https://lindat.mff.cuni.cz/repository/xmlui/handle/11234/1-1827}. Como se
ha mencionado en el párrafo anterior, este \emph{dataset} usa el formato
\textsc{CoNLL-U}\footnote{\url{http://universaldependencies.org/format.html}},
formato que ha sido adaptado usando el \textsc{script} mencionado anteriormente.

Como ejemplo, se proporciona el formato original de una frase en la
\autoref{lst:conllu} frente a la conversión realizada en la
\autoref{lst:converted}.
\begin{figure}[ht]
  \begin{bashcode}
1       Tambores        tambor  NOUN    NOUN    Gender=Masc|Number=Plur 0       root    _       _
2       cercanos        cercano ADJ     ADJ     Gender=Masc|Number=Plur 1       amod    _       _
3       ,       ,       PUNCT   PUNCT   PunctType=Comm  4       punct   _       _
4       en      en      ADP     ADP     AdpType=Prep    1       advmod  _       MWE=en_todo_caso|MWEPOS=ADV
5       todo    todo    PRON    PRON    Gender=Masc|Number=Sing|PronType=Tot    4       mwe     _       _
6       caso    caso    NOUN    NOUN    _       4       mwe     _       _
7       :       :       PUNCT   PUNCT   PunctType=Colo  10      punct   _       _
8       todo    todo    DET     DET     Gender=Masc|Number=Sing|PronType=Ind    10      det     _       _
9       un      uno     DET     DET     Gender=Masc|Number=Sing|PronType=Ind    8       det     _       _
10      muestrario      muestrario      NOUN    NOUN    Gender=Masc|Number=Sing 1       appos   _       _
11      de      de      ADP     ADP     AdpType=Prep    13      case    _       _
12      esa     ese     DET     DET     Gender=Fem|Number=Sing|PronType=Dem     13      det     _       _
13      percusión       percusión       NOUN    NOUN    Gender=Fem|Number=Sing  10      nmod    _       _
14      urbana  urbano  ADJ     ADJ     Gender=Fem|Number=Sing  13      amod    _       _
15      de      de      ADP     ADP     AdpType=Prep    17      case    _       _
16      nuestro nuestro DET     DET     Gender=Masc|Number=Sing|Number[psor]=Plur|Person=1|Poss=Yes|PronType=Prs        17      det     _       _
17      tiempo  tiempo  NOUN    NOUN    Gender=Masc|Number=Sing 13      nmod    _       _
18      .       .       PUNCT   PUNCT   PunctType=Peri  1       punct   _       _
  \end{bashcode}
  \caption{Frase en formato \textsc{CoNLL-U}.}
  \label{lst:conllu}
\end{figure}
\begin{figure}[hb]
  \begin{bashcode}
Tambores        NOUN    NOUN    -1
cercanos        ADJ     ADJ     0
,       PUNCT   PUNCT   3
en      ADP     ADP     0
todo    DET     PRON    3
caso    NOUN    NOUN    3
:       PUNCT   PUNCT   9
todo    DET     DET     9
un      DET     DET     7
muestrario      NOUN    NOUN    0
de      ADP     ADP     12
esa     DET     DET     12
percusión       NOUN    NOUN    9
urbana  ADJ     ADJ     12
de      ADP     ADP     16
nuestro DET     DET     16
tiempo  NOUN    NOUN    12
.       PUNCT   PUNCT   0
  \end{bashcode}
  \caption{Frase en formato convertido.}
  \label{lst:converted}
\end{figure}

Para las pruebas realizadas, el tamaño del conjunto de datos de entrenamiento es
de 14305 frases, los datos de \emph{test} contienen 1721 sentencias.

\section{Medidas de Evaluación}
\label{sec:eval}

En orden de evaluar los resultados del algoritmo, \citeauthor{yamada2003}
proponen tres tipos de medidas. Precisión de Dependencias, Precisión en la Raíz
y clasificación Completa --- \emph{Dependency Accuracy (Dep. Acc.), Root
  Accuracy (Root Acc.)} y \emph{Complete Rate (Comp. Rate)},
respectivamente. --- Dichas mediciones se definen como
\begin{equation*}
  \begin{aligned}
    & \text{\emph{Dep. Acc}} &=& \quad\frac{\text{Número correcto de padres}}{\text{Número
        total de padres}} \\
    & \text{\emph{Root Acc}} &=& \quad\frac{\text{Número de nodos raíz correctos}}{\text{Número
        total de frases}} \\
    & \text{\emph{Comp. Rate}} &=& \quad\frac{\text{Número de frases
        parseadas por completo}}{\text{Número total de frases}} 
  \end{aligned}
\end{equation*}

\section{Comparación de Resultados}
\label{sec:results}

Tras realizar varias pruebas para ajustar parámetros, finalmente se fijó el
grado del polinómio a 2, como muestra el Código~\ref{lst:svmparams}. En cuanto a
la longitud del contexto, introducido en \autoref{subsec:featureextraction} el
mejor resultado se obtiene cuando se fija en $(2,4)$, esto es, se usa un
contexto a la izquierda de dos nodos, y un contexto a la derecha de cuatro
nodos. La \autoref{tab:results} muestra una comparación de los resultados
obtenidos con el parseador implementado frente a los resultados de
\citeauthor{rohit2016}.
\begin{table}[ht]
  \myfloatalign
  \begin{tabular}{l|cc}
    \tableheadline{Kernel: $(x'\cdot x'' + 1)^2$, Contexto: $(2,4)$ }
       & \tableheadline{TFG}
       & \tableheadline{\citeauthor{rohit2016}} \\
    \toprule
    \emph{Dep. Acc.}  & 76\%   & 75\% \\
    \emph{Root Acc.}  & 67\%   & 70\% \\
    \emph{Comp. Rate} & 15\%   & 11\% \\
    \bottomrule
  \end{tabular}
  \caption{Comparación de resultados}
  \label{tab:results}
\end{table}

Como se puede apreciar, los resultados son bastante similares, llegando a
mejorar el \emph{Comp. Rate}.


\myTodo[inline]{
Tienes que hablar del llamado experimental framework, o marco experimental, que incluye:}
\myTodo[inline]{- Datos o bases de datos a tratar. Proporciona toda la información posible sobre ello, no solo su tamaño. De qué se trata, dónde están, etc etc.}
\myTodo[inline]{- Medidas de evaluación (no métodos).}
\myTodo[inline]{- De qué va el método de Jain? Hay que describirlo también con el mayor posible nivel de detalle.}
\myTodo[inline]{- Breve análisis de resultados, ¿por qué sale lo que sale o por qué crees que sale eso?}


%*****************************************
%*****************************************
%*****************************************
%*****************************************
%*****************************************
